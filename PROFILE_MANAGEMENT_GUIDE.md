# Руководство по управлению профилем пользователя

## Обзор функциональности

Добавлена возможность для пользователей управлять своими профилями, включая:
- Редактирование личной информации (имя, имя пользователя, email, биография)
- Загрузка и управление аватаркой
- Просмотр статистики активности

## Доступные страницы

### 1. Просмотр профиля (`/profile`)
- **Маршрут**: `profile.show`
- **Контроллер**: `ProfileController@show`
- **Представление**: `resources/views/profile/show.blade.php`

**Функции:**
- Отображение информации о пользователе
- Показ аватарки (или заглушки)
- Статистика активности (темы, сообщения, рецензии)
- Кнопка "Редактировать профиль"

### 2. Редактирование профиля (`/profile/edit`)
- **Маршрут**: `profile.edit`
- **Контроллер**: `ProfileController@edit`
- **Представление**: `resources/views/profile/edit.blade.php`

**Функции:**
- Форма редактирования всех полей профиля
- Загрузка аватарки с валидацией
- Удаление текущей аватарки
- Валидация данных

### 3. Обновление профиля (`/profile`)
- **Маршрут**: `profile.update`
- **Метод**: PUT
- **Контроллер**: `ProfileController@update`

**Функции:**
- Сохранение изменений в базе данных
- Обработка загрузки аватарки
- Удаление старой аватарки при загрузке новой

### 4. Удаление аватарки (`/profile/avatar`)
- **Маршрут**: `profile.avatar.destroy`
- **Метод**: DELETE
- **Контроллер**: `ProfileController@destroyAvatar`

## Панель управления Filament

### Страница профиля в админке (`/admin11/profile`)
- **Класс**: `App\Filament\Pages\Profile`
- **Представление**: `resources/views/filament/pages/profile.blade.php`

**Функции:**
- Просмотр профиля администратора
- Ссылка на редактирование профиля
- Статистика активности

## Навигация

### В главном меню
- Добавлена ссылка "Мій профіль" в пользовательском меню
- Аватарка пользователя отображается в навигации

### В админ-панели
- Добавлена страница "Профиль" в навигации
- Иконка: `heroicon-o-user`

## Технические детали

### Модель User
Поля профиля уже присутствуют в модели:
- `name` - имя пользователя
- `username` - имя пользователя (уникальное)
- `email` - email (уникальный)
- `avatar` - путь к аватарке
- `bio` - биография пользователя
- `rating` - рейтинг пользователя

### Хранение файлов
- Аватарки сохраняются в `storage/app/public/avatars/`
- Создана символическая ссылка `public/storage`
- Поддерживаемые форматы: JPEG, PNG, GIF, WebP
- Максимальный размер: 2MB

### Валидация
- Имя: обязательное, максимум 255 символов
- Имя пользователя: обязательное, уникальное, максимум 255 символов
- Email: обязательный, уникальный, валидный email
- Биография: необязательная, максимум 1000 символов
- Аватарка: необязательная, изображение, максимум 2MB

### Безопасность
- Все маршруты защищены middleware `auth`
- Валидация на стороне сервера
- Удаление старых файлов при загрузке новых

## Использование

### Для пользователей
1. Войдите в систему
2. Нажмите на аватарку в правом верхнем углу
3. Выберите "Мій профіль"
4. Нажмите "Редактировать профиль" для внесения изменений

### Для администраторов
1. Войдите в админ-панель (`/admin11`)
2. Перейдите в раздел "Профиль"
3. Просмотрите информацию о профиле
4. Используйте ссылку "Редактировать профиль" для перехода к редактированию

## Файлы проекта

### Контроллеры
- `app/Http/Controllers/ProfileController.php`

### Представления
- `resources/views/profile/show.blade.php`
- `resources/views/profile/edit.blade.php`
- `resources/views/filament/pages/profile.blade.php`

### Страницы Filament
- `app/Filament/Pages/Profile.php`

### Маршруты
- Добавлены в `routes/web.php`

### Обновления
- `app/Filament/Resources/UserResource.php` - добавлена поддержка загрузки аватарки
- `resources/views/layouts/app.blade.php` - добавлена навигация к профилю
