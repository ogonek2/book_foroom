# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ CDN –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤

## üéØ –¶–µ–ª—å

–ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è **—Ç–æ–ª—å–∫–æ** –Ω–∞ BunnyCDN, –±–µ–∑ fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env —Ñ–∞–π–ª

```env
# BunnyCDN Storage Settings
BUNNY_STORAGE_NAME=foxy-forum
BUNNY_STORAGE_PASSWORD=your_storage_password_here

# BunnyCDN CDN URL
BUNNY_CDN_URL=https://foxy-forum.b-cdn.net

# SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ—Ç–∫–ª—é—á–∏—Ç—å SSL –ø—Ä–æ–≤–µ—Ä–∫—É)
CDN_SSL_VERIFY=false
CDN_TIMEOUT=30
```

### 2. –ü–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. **–í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è BunnyCDN**
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Storage" ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Storage Zone**
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ:**
   - **Storage Name** (–Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ Storage Zone)
   - **Storage Password** (–ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
4. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Pull Zones" ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Pull Zone**
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ CDN URL**

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- ‚úÖ Storage Zone —Å–æ–∑–¥–∞–Ω –≤ BunnyCDN
- ‚úÖ CDN Pull Zone –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ Storage Password –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
- ‚úÖ Storage Name —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–º—É Storage Zone

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏

```bash
php artisan cdn:test-upload
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
- –ó–∞–≥—Ä—É–∑–∏—Ç –µ–≥–æ –Ω–∞ CDN
- –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å SSL

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ `cURL error 60: SSL certificate problem`, —Å–º. —Ñ–∞–π–ª `SSL_SETUP_GUIDE.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

**–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
CDN_SSL_VERIFY=false
```

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### CDNUploader Helper

**–§–∞–π–ª:** `app/Helpers/CDNUploader.php`

**–ú–µ—Ç–æ–¥—ã:**
- `uploadFile(UploadedFile $file, string $folder)` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (CDN + fallback)
- `uploadToBunnyCDN(UploadedFile $file, string $folder)` - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CDN
- `uploadLocally(UploadedFile $file, string $folder)` - –ª–æ–∫–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- `deleteFromBunnyCDN(string $url)` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å CDN

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
use App\Helpers\CDNUploader;

// –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ (—Å–Ω–∞—á–∞–ª–∞ CDN, –ø–æ—Ç–æ–º –ª–æ–∫–∞–ª—å–Ω–æ)
$avatarUrl = CDNUploader::uploadFile($request->file('avatar'), 'avatars');

// –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
CDNUploader::deleteFromBunnyCDN($user->avatar);
```

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

**–§–∞–π–ª:** `app/Http/Controllers/ProfileController.php`

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–≤–∞—Ç–∞—Ä–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `CDNUploader::uploadFile()`
2. –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ CDN
3. –ï—Å–ª–∏ CDN –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π URL (CDN –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π)
5. URL —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ `avatar` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `CDNUploader::deleteFromBunnyCDN()`

### –ú–æ–¥–µ–ª—å User

**–§–∞–π–ª:** `app/Models/User.php`

**–ú–µ—Ç–æ–¥—ã:**
- `getAvatarUrlAttribute()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π URL –∞–≤–∞—Ç–∞—Ä–∞
- `getAvatarDisplayAttribute()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Å fallback –Ω–∞ UI Avatars

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª**
2. **CDNUploader::upload() –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞ BunnyCDN**
3. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π URL CDN**
4. **URL —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
5. **–ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π URL**

## ‚ùå –ß—Ç–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

- ‚ùå –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Laravel
- ‚ùå FTP —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PHP
- ‚ùå Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚ùå –°–ª–æ–∂–Ω—ã–µ —Ç—Ä–µ–π—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ê–≤–∞—Ç–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ BunnyCDN
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ CDN
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏ —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤
