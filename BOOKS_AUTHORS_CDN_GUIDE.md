# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ CDN –¥–ª—è –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤

## üéØ –û–±–∑–æ—Ä

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤ –Ω–∞ BunnyCDN:

- **–û–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥** ‚Üí `book-covers/` –ø–∞–ø–∫–∞ –Ω–∞ CDN
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∞–≤—Ç–æ—Ä–æ–≤** ‚Üí `authors/` –ø–∞–ø–∫–∞ –Ω–∞ CDN

## üîß –ß—Ç–æ –±—ã–ª–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω—ã Filament Resources

#### BookResource (`app/Filament/Resources/BookResource.php`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `CDNUploader`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª–µ `cover_image` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ CDN
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ —Å—Ç–æ—Ä–æ–Ω
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ CDN
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Å CDN URL

#### AuthorResource (`app/Filament/Resources/AuthorResource.php`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `CDNUploader`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ `photo` –Ω–∞ `FileUpload`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ CDN
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CDN –≤ –ø–∞–ø–∫—É `authors/`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ —Ç–∞–±–ª–∏—Ü–µ

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏

#### Book Model (`app/Models/Book.php`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `getCoverImageUrlAttribute()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç CDN URL
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `getCoverImageDisplayAttribute()` - —Å fallback –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ CDN URL, —Ç–∞–∫ –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

#### Author Model (`app/Models/Author.php`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `getPhotoUrlAttribute()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ CDN
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `getPhotoDisplayAttribute()` —Å fallback
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

### 3. –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### TestBookAuthorCDN (`app/Console/Commands/TestBookAuthorCDN.php`)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –æ–±–ª–æ–∂–µ–∫ –∫–Ω–∏–≥
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∞–≤—Ç–æ—Ä–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —Å CDN –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è URL

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∞–¥–º–∏–Ω–∫–µ Filament

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥–∏:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ö–Ω–∏–≥–∏"
   - –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–Ω–∏–≥—É
   - –í —Ä–∞–∑–¥–µ–ª–µ "–û–±–ª–æ–∂–∫–∞" –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –Ω–∞ CDN

2. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∞–≤—Ç–æ—Ä–∞:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ê–≤—Ç–æ—Ä—ã"
   - –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∞
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –≤ –ø–æ–ª–µ "Photo"
   - –§–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –Ω–∞ CDN

### –í –∫–æ–¥–µ

```php
// –ü–æ–ª—É—á–µ–Ω–∏–µ URL –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥–∏
$book = Book::find(1);
$coverUrl = $book->cover_image_url; // CDN URL –∏–ª–∏ null
$coverDisplay = $book->cover_image_display; // CDN URL –∏–ª–∏ fallback

// –ü–æ–ª—É—á–µ–Ω–∏–µ URL —Ñ–æ—Ç–æ –∞–≤—Ç–æ—Ä–∞
$author = Author::find(1);
$photoUrl = $author->photo_url; // CDN URL –∏–ª–∏ null
$photoDisplay = $author->photo_display; // CDN URL –∏–ª–∏ fallback
```

### –í Blade —à–∞–±–ª–æ–Ω–∞—Ö

```blade
{{-- –û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏ --}}
<img src="{{ $book->cover_image_display }}" alt="{{ $book->title }}">

{{-- –§–æ—Ç–æ –∞–≤—Ç–æ—Ä–∞ --}}
<img src="{{ $author->photo_display }}" alt="{{ $author->full_name }}">
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞–ø–æ–∫
–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:
```bash
php create_temp_folders.php
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –∞–≤—Ç–æ—Ä–∞
```bash
php test_author_photo.php
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Artisan (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
```bash
php artisan cdn:test-book-author
```

–ö–æ–º–∞–Ω–¥—ã:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é CDN
- ‚úÖ –ó–∞–≥—Ä—É–∑—è—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –°–æ–∑–¥–∞–¥—É—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤
- ‚úÖ –ü–æ–∫–∞–∂—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CDN

```
–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ):
‚îú‚îÄ‚îÄ storage/app/public/authors-temp/     # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ –∞–≤—Ç–æ—Ä–æ–≤
‚îî‚îÄ‚îÄ storage/app/public/book-covers-temp/ # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥

BunnyCDN Storage:
‚îú‚îÄ‚îÄ avatars/          # –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ book-covers/      # –û–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥
‚îî‚îÄ‚îÄ authors/          # –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∞–≤—Ç–æ—Ä–æ–≤
```

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ –°—Ç–∞—Ä—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `asset()`)
- ‚úÖ –ù–æ–≤—ã–µ CDN –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–∞–ø–∫–∏ –Ω–∞ CDN:**
   - `book-covers/` - –¥–ª—è –æ–±–ª–æ–∂–µ–∫ –∫–Ω–∏–≥
   - `authors/` - –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∞–≤—Ç–æ—Ä–æ–≤

2. **–§–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: JPG, PNG, GIF, WebP
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 2MB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Filament)

3. **–†–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - –î–æ—Å—Ç—É–ø–µ–Ω –≤ –∞–¥–º–∏–Ω–∫–µ Filament
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å—Ç–æ—Ä–æ–Ω
   - –û–±—Ä–µ–∑–∫–∞ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

4. **Fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - –ö–Ω–∏–≥–∏: `/images/no-cover.png`
   - –ê–≤—Ç–æ—Ä—ã: `/images/no-author.png`

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∞–≤–∞—Ç–∞—Ä—ã, –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥, —Ñ–æ—Ç–æ –∞–≤—Ç–æ—Ä–æ–≤) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ BunnyCDN –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ!
