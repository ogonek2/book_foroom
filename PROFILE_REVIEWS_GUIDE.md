# Руководство: Блок рецензий в профиле пользователя

## Обзор

Добавлен новый блок "Мої рецензії" на странице профиля пользователя, который отображает последние рецензии пользователя.

## Что добавлено

### 1. **Блок с рецензиями пользователя**
Расположен под блоком "Останні прочитані книги" на странице профиля.

### 2. **Функционал блока:**

#### Отображение рецензий:
- **Последние 3 рецензии** пользователя
- Сортировка по дате создания (новые первые)
- Только основные рецензии (без ответов)

#### Информация в каждой рецензии:
- **Название книги** - кликабельная ссылка на страницу книги
- **Автор книги** - отображается под названием
- **Рейтинг** - звездочки и числовая оценка (если есть)
- **Текст рецензии** - первые 250 символов
- **Кнопка "Читати повністю"** - если текст длиннее 250 символов
- **Количество лайков** - иконка сердца + число
- **Количество ответов** - иконка комментария + число
- **Дата публикации** - относительное время (например, "2 дня назад")

#### Пустое состояние:
- Отображается, если у пользователя нет рецензий
- Иконка комментария
- Заголовок "Ще немає рецензій"
- Описание "Поділіться своїми думками про прочитані книги"
- Кнопка "Написати рецензію" с переходом на страницу книг

#### Кнопка "Всі рецензії":
- Отображается, если рецензий больше 3
- Показывает общее количество рецензий
- Переход на страницу со всеми рецензиями пользователя (пока заглушка)

## Код

### Получение рецензий:
```php
$userReviews = $user->reviews()
    ->with(['book'])
    ->whereNull('parent_id')  // Только основные рецензии
    ->orderBy('created_at', 'desc')
    ->limit(3)
    ->get();
```

### Отображение рейтинга:
```blade
@if($review->rating)
    <div class="flex items-center ml-4">
        <div class="flex space-x-1">
            @for($i = 1; $i <= 5; $i++)
                <svg class="w-5 h-5 {{ $i <= $review->rating ? 'text-yellow-400' : 'text-gray-600' }}" ...>
                    <!-- SVG звездочки -->
                </svg>
            @endfor
        </div>
        <span class="ml-2 text-white font-medium">{{ $review->rating }}/5</span>
    </div>
@endif
```

### Ограничение текста:
```blade
{{ Str::limit($review->content, 250) }}
@if(strlen($review->content) > 250)
    <a href="{{ route('books.reviews.show', [$review->book, $review]) }}" ...>
        Читати повністю
    </a>
@endif
```

## Дизайн

### Цветовая схема:
- **Фон карточки**: `bg-gray-800`
- **Текст заголовка**: `text-white`
- **Текст автора**: `text-gray-400`
- **Текст рецензии**: `text-gray-300`
- **Звездочки активные**: `text-yellow-400`
- **Звездочки неактивные**: `text-gray-600`
- **Ссылки**: `text-orange-400` с hover `text-orange-300`
- **Иконки**: `text-gray-400`

### Эффекты:
- **Hover на карточку**: `hover:shadow-xl transition-shadow`
- **Hover на название книги**: `hover:text-orange-400 transition-colors`
- **Переход**: `transition-all duration-200`

## Структура HTML

```html
<div class="mt-8">
    <h2>Мої рецензії</h2>
    
    <div class="space-y-4">
        <!-- Review Card -->
        <div class="bg-gray-800 rounded-lg p-6">
            <!-- Header: Title + Rating -->
            <div class="flex items-start justify-between mb-4">
                <div class="flex-1">
                    <a href="#">{{ book.title }}</a>
                    <p>{{ book.author }}</p>
                </div>
                <div class="flex items-center">
                    <!-- Stars -->
                    <span>{{ rating }}/5</span>
                </div>
            </div>
            
            <!-- Content -->
            <div class="text-gray-300">
                {{ review.content }}
            </div>
            
            <!-- Footer: Likes, Comments, Date -->
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <!-- Likes -->
                    <!-- Comments -->
                </div>
                <div>{{ date }}</div>
            </div>
        </div>
    </div>
    
    <!-- "All Reviews" Button (if > 3) -->
    <div class="mt-6 text-center">
        <a href="#">Всі рецензії ({{ count }})</a>
    </div>
</div>
```

## Связь с моделями

### Review Model:
- `book()` - отношение к книге
- `user()` - отношение к пользователю
- `likes_count` - атрибут для количества лайков
- `replies_count` - поле для количества ответов

### User Model:
- `reviews()` - отношение ко всем рецензиям пользователя

## Следующие шаги (опционально)

1. **Создать страницу со всеми рецензиями пользователя**
   - Маршрут: `/profile/{user}/reviews`
   - Пагинация рецензий
   - Фильтры (по дате, рейтингу)

2. **Добавить возможность редактирования/удаления**
   - Только для собственных рецензий
   - Кнопки редактировать/удалить в меню

3. **Добавить фильтрацию**
   - По книгам
   - По рейтингу
   - По дате

4. **Статистика рецензий**
   - Средний рейтинг пользователя
   - Количество полезных отзывов (по лайкам)
   - Самая популярная рецензия
